{"version":3,"sources":["../../src/lib-esm/hogan.js"],"names":["Hogan","Template","codeObj","text","compiler","options","r","code","c","partials","subs","buf","prototype","v","str","coerceToString","hChars","test","replace","rAmp","rLt","rGt","rApos","rQuot","t","render","context","indent","ri","ep","symbol","partial","template","name","instance","base","Error","compile","stackText","key","activeSub","createSpecializedPartial","stackSubs","stackPartials","rp","rs","section","tail","length","isArray","i","push","pop","s","val","ctx","inverted","start","end","tags","pass","ms","d","returnFound","found","names","split","f","doModelGet","modelGet","cx","findInScope","mv","ls","func","oldTags","delimiters","b","ct","call","disableLambda","fl","textSource","result","subsText","substring","sub","scope","get","PartialTemplate","Substitutions","Array","a","Object","toString","exports","scan","len","state","tagType","tag","tokens","seenTag","lineStart","otag","ctag","addBuf","String","lineIsWhitespace","isAllWhitespace","j","match","filterLine","haveSeenTag","noNewLine","next","splice","changeDelimiters","index","close","closeIndex","indexOf","trim","tagChange","charAt","n","cleanTripleStache","token","substr","l","allowedInSuper","buildTree","kind","stack","customTags","instructions","opener","shift","isOpener","nodes","isCloser","last","o","open","stringifySubstitutions","obj","items","esc","join","stringifyPartials","stringify","wrapMain","serialNo","generate","tree","walk","asString","makeTemplate","makePartials","Function","chooseMethod","createPartial","node","prefix","sym","codegen","inPartial","write","tripleStache","nodelist","parse","sectionTags","cache","cacheKey","define","amd"],"mappings":"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","sourcesContent":["/*!\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n\n\nvar Hogan = {};\n\n(function (Hogan) {\n  Hogan.Template = function (codeObj, text, compiler, options) {\n    codeObj = codeObj || {};\n    this.r = codeObj.code || this.r;\n    this.c = compiler;\n    this.options = options || {};\n    this.text = text || '';\n    this.partials = codeObj.partials || {};\n    this.subs = codeObj.subs || {};\n    this.buf = '';\n  }\n\n  Hogan.Template.prototype = {\n    // render: replaced by generated code.\n    r: function (context, partials, indent) { return ''; },\n\n    // variable escaping\n    v: hoganEscape,\n\n    // triple stache\n    t: coerceToString,\n\n    render: function render(context, partials, indent) {\n      return this.ri([context], partials || {}, indent);\n    },\n\n    // render internal -- a hook for overrides that catches partials too\n    ri: function (context, partials, indent) {\n      return this.r(context, partials, indent);\n    },\n\n    // ensurePartial\n    ep: function(symbol, partials) {\n      var partial = this.partials[symbol];\n\n      // check to see that if we've instantiated this partial before\n      var template = partials[partial.name];\n      if (partial.instance && partial.base == template) {\n        return partial.instance;\n      }\n\n      if (typeof template == 'string') {\n        if (!this.c) {\n          throw new Error(\"No compiler available.\");\n        }\n        template = this.c.compile(template, this.options);\n      }\n\n      if (!template) {\n        return null;\n      }\n\n      // We use this to check whether the partials dictionary has changed\n      this.partials[symbol].base = template;\n\n      if (partial.subs) {\n        // Make sure we consider parent template now\n        if (!partials.stackText) partials.stackText = {};\n        for (key in partial.subs) {\n          if (!partials.stackText[key]) {\n            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n          }\n        }\n        template = createSpecializedPartial(template, partial.subs, partial.partials,\n          this.stackSubs, this.stackPartials, partials.stackText);\n      }\n      this.partials[symbol].instance = template;\n\n      return template;\n    },\n\n    // tries to find a partial in the current scope and render it\n    rp: function(symbol, context, partials, indent) {\n      var partial = this.ep(symbol, partials);\n      if (!partial) {\n        return '';\n      }\n\n      return partial.ri(context, partials, indent);\n    },\n\n    // render a section\n    rs: function(context, partials, section) {\n      var tail = context[context.length - 1];\n\n      if (!isArray(tail)) {\n        section(context, partials, this);\n        return;\n      }\n\n      for (var i = 0; i < tail.length; i++) {\n        context.push(tail[i]);\n        section(context, partials, this);\n        context.pop();\n      }\n    },\n\n    // maybe start a section\n    s: function(val, ctx, partials, inverted, start, end, tags) {\n      var pass;\n\n      if (isArray(val) && val.length === 0) {\n        return false;\n      }\n\n      if (typeof val == 'function') {\n        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n      }\n\n      pass = !!val;\n\n      if (!inverted && pass && ctx) {\n        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n      }\n\n      return pass;\n    },\n\n    // find values with dotted names\n    d: function(key, ctx, partials, returnFound) {\n      var found,\n          names = key.split('.'),\n          val = this.f(names[0], ctx, partials, returnFound),\n          doModelGet = this.options.modelGet,\n          cx = null;\n\n      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n        val = ctx[ctx.length - 1];\n      } else {\n        for (var i = 1; i < names.length; i++) {\n          found = findInScope(names[i], val, doModelGet);\n          if (found !== undefined) {\n            cx = val;\n            val = found;\n          } else {\n            val = '';\n          }\n        }\n      }\n\n      if (returnFound && !val) {\n        return false;\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        ctx.push(cx);\n        val = this.mv(val, ctx, partials);\n        ctx.pop();\n      }\n\n      return val;\n    },\n\n    // find values with normal names\n    f: function(key, ctx, partials, returnFound) {\n      var val = false,\n          v = null,\n          found = false,\n          doModelGet = this.options.modelGet;\n\n      for (var i = ctx.length - 1; i >= 0; i--) {\n        v = ctx[i];\n        val = findInScope(key, v, doModelGet);\n        if (val !== undefined) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        return (returnFound) ? false : \"\";\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        val = this.mv(val, ctx, partials);\n      }\n\n      return val;\n    },\n\n    // higher order templates\n    ls: function(func, cx, partials, text, tags) {\n      var oldTags = this.options.delimiters;\n\n      this.options.delimiters = tags;\n      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n      this.options.delimiters = oldTags;\n\n      return false;\n    },\n\n    // compile text\n    ct: function(text, cx, partials) {\n      if (this.options.disableLambda) {\n        throw new Error('Lambda features disabled.');\n      }\n      return this.c.compile(text, this.options).render(cx, partials);\n    },\n\n    // template result buffering\n    b: function(s) { this.buf += s; },\n\n    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\n    // method replace section\n    ms: function(func, ctx, partials, inverted, start, end, tags) {\n      var textSource,\n          cx = ctx[ctx.length - 1],\n          result = func.call(cx);\n\n      if (typeof result == 'function') {\n        if (inverted) {\n          return true;\n        } else {\n          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n        }\n      }\n\n      return result;\n    },\n\n    // method replace variable\n    mv: function(func, ctx, partials) {\n      var cx = ctx[ctx.length - 1];\n      var result = func.call(cx);\n\n      if (typeof result == 'function') {\n        return this.ct(coerceToString(result.call(cx)), cx, partials);\n      }\n\n      return result;\n    },\n\n    sub: function(name, context, partials, indent) {\n      var f = this.subs[name];\n      if (f) {\n        this.activeSub = name;\n        f(context, partials, this, indent);\n        this.activeSub = false;\n      }\n    }\n\n  };\n\n  //Find a key in an object\n  function findInScope(key, scope, doModelGet) {\n    var val;\n\n    if (scope && typeof scope == 'object') {\n\n      if (scope[key] !== undefined) {\n        val = scope[key];\n\n      // try lookup with get for backbone or similar model data\n      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n        val = scope.get(key);\n      }\n    }\n\n    return val;\n  }\n\n  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n    function PartialTemplate() {};\n    PartialTemplate.prototype = instance;\n    function Substitutions() {};\n    Substitutions.prototype = instance.subs;\n    var key;\n    var partial = new PartialTemplate();\n    partial.subs = new Substitutions();\n    partial.subsText = {};  //hehe. substext.\n    partial.buf = '';\n\n    stackSubs = stackSubs || {};\n    partial.stackSubs = stackSubs;\n    partial.subsText = stackText;\n    for (key in subs) {\n      if (!stackSubs[key]) stackSubs[key] = subs[key];\n    }\n    for (key in stackSubs) {\n      partial.subs[key] = stackSubs[key];\n    }\n\n    stackPartials = stackPartials || {};\n    partial.stackPartials = stackPartials;\n    for (key in partials) {\n      if (!stackPartials[key]) stackPartials[key] = partials[key];\n    }\n    for (key in stackPartials) {\n      partial.partials[key] = stackPartials[key];\n    }\n\n    return partial;\n  }\n\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function coerceToString(val) {\n    return String((val === null || val === undefined) ? '' : val);\n  }\n\n  function hoganEscape(str) {\n    str = coerceToString(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n  var isArray = Array.isArray || function(a) {\n    return Object.prototype.toString.call(a) === '[object Array]';\n  };\n\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n(function (Hogan) {\n  // Setup regex  assignments\n  // remove whitespace according to Mustache spec\n  var rIsWhitespace = /\\S/,\n      rQuot = /\\\"/g,\n      rNewline =  /\\n/g,\n      rCr = /\\r/g,\n      rSlash = /\\\\/g,\n      rLineSep = /\\u2028/,\n      rParagraphSep = /\\u2029/;\n\n  Hogan.tags = {\n    '#': 1, '^': 2, '<': 3, '$': 4,\n    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n    '{': 10, '&': 11, '_t': 12\n  };\n\n  Hogan.scan = function scan(text, delimiters) {\n    var len = text.length,\n        IN_TEXT = 0,\n        IN_TAG_TYPE = 1,\n        IN_TAG = 2,\n        state = IN_TEXT,\n        tagType = null,\n        tag = null,\n        buf = '',\n        tokens = [],\n        seenTag = false,\n        i = 0,\n        lineStart = 0,\n        otag = '{{',\n        ctag = '}}';\n\n    function addBuf() {\n      if (buf.length > 0) {\n        tokens.push({tag: '_t', text: new String(buf)});\n        buf = '';\n      }\n    }\n\n    function lineIsWhitespace() {\n      var isAllWhitespace = true;\n      for (var j = lineStart; j < tokens.length; j++) {\n        isAllWhitespace =\n          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n        if (!isAllWhitespace) {\n          return false;\n        }\n      }\n\n      return isAllWhitespace;\n    }\n\n    function filterLine(haveSeenTag, noNewLine) {\n      addBuf();\n\n      if (haveSeenTag && lineIsWhitespace()) {\n        for (var j = lineStart, next; j < tokens.length; j++) {\n          if (tokens[j].text) {\n            if ((next = tokens[j+1]) && next.tag == '>') {\n              // set indent to token value\n              next.indent = tokens[j].text.toString()\n            }\n            tokens.splice(j, 1);\n          }\n        }\n      } else if (!noNewLine) {\n        tokens.push({tag:'\\n'});\n      }\n\n      seenTag = false;\n      lineStart = tokens.length;\n    }\n\n    function changeDelimiters(text, index) {\n      var close = '=' + ctag,\n          closeIndex = text.indexOf(close, index),\n          delimiters = trim(\n            text.substring(text.indexOf('=', index) + 1, closeIndex)\n          ).split(' ');\n\n      otag = delimiters[0];\n      ctag = delimiters[delimiters.length - 1];\n\n      return closeIndex + close.length - 1;\n    }\n\n    if (delimiters) {\n      delimiters = delimiters.split(' ');\n      otag = delimiters[0];\n      ctag = delimiters[1];\n    }\n\n    for (i = 0; i < len; i++) {\n      if (state == IN_TEXT) {\n        if (tagChange(otag, text, i)) {\n          --i;\n          addBuf();\n          state = IN_TAG_TYPE;\n        } else {\n          if (text.charAt(i) == '\\n') {\n            filterLine(seenTag);\n          } else {\n            buf += text.charAt(i);\n          }\n        }\n      } else if (state == IN_TAG_TYPE) {\n        i += otag.length - 1;\n        tag = Hogan.tags[text.charAt(i + 1)];\n        tagType = tag ? text.charAt(i + 1) : '_v';\n        if (tagType == '=') {\n          i = changeDelimiters(text, i);\n          state = IN_TEXT;\n        } else {\n          if (tag) {\n            i++;\n          }\n          state = IN_TAG;\n        }\n        seenTag = i;\n      } else {\n        if (tagChange(ctag, text, i)) {\n          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n          buf = '';\n          i += ctag.length - 1;\n          state = IN_TEXT;\n          if (tagType == '{') {\n            if (ctag == '}}') {\n              i++;\n            } else {\n              cleanTripleStache(tokens[tokens.length - 1]);\n            }\n          }\n        } else {\n          buf += text.charAt(i);\n        }\n      }\n    }\n\n    filterLine(seenTag, true);\n\n    return tokens;\n  }\n\n  function cleanTripleStache(token) {\n    if (token.n.substr(token.n.length - 1) === '}') {\n      token.n = token.n.substring(0, token.n.length - 1);\n    }\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s*|\\s*$/g, '');\n  }\n\n  function tagChange(tag, text, index) {\n    if (text.charAt(index) != tag.charAt(0)) {\n      return false;\n    }\n\n    for (var i = 1, l = tag.length; i < l; i++) {\n      if (text.charAt(index + i) != tag.charAt(i)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // the tags allowed inside super templates\n  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\n  function buildTree(tokens, kind, stack, customTags) {\n    var instructions = [],\n        opener = null,\n        tail = null,\n        token = null;\n\n    tail = stack[stack.length - 1];\n\n    while (tokens.length > 0) {\n      token = tokens.shift();\n\n      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n        throw new Error('Illegal content in < super tag.');\n      }\n\n      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n        stack.push(token);\n        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n      } else if (token.tag == '/') {\n        if (stack.length === 0) {\n          throw new Error('Closing tag without opener: /' + token.n);\n        }\n        opener = stack.pop();\n        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n        }\n        opener.end = token.i;\n        return instructions;\n      } else if (token.tag == '\\n') {\n        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n      }\n\n      instructions.push(token);\n    }\n\n    if (stack.length > 0) {\n      throw new Error('missing closing tag: ' + stack.pop().n);\n    }\n\n    return instructions;\n  }\n\n  function isOpener(token, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].o == token.n) {\n        token.tag = '#';\n        return true;\n      }\n    }\n  }\n\n  function isCloser(close, open, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].c == close && tags[i].o == open) {\n        return true;\n      }\n    }\n  }\n\n  function stringifySubstitutions(obj) {\n    var items = [];\n    for (var key in obj) {\n      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n    }\n    return \"{ \" + items.join(\",\") + \" }\";\n  }\n\n  function stringifyPartials(codeObj) {\n    var partials = [];\n    for (var key in codeObj.partials) {\n      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n    }\n    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n  }\n\n  Hogan.stringify = function(codeObj, text, options) {\n    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n  }\n\n  var serialNo = 0;\n  Hogan.generate = function(tree, text, options) {\n    serialNo = 0;\n    var context = { code: '', subs: {}, partials: {} };\n    Hogan.walk(tree, context);\n\n    if (options.asString) {\n      return this.stringify(context, text, options);\n    }\n\n    return this.makeTemplate(context, text, options);\n  }\n\n  Hogan.wrapMain = function(code) {\n    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n  }\n\n  Hogan.template = Hogan.Template;\n\n  Hogan.makeTemplate = function(codeObj, text, options) {\n    var template = this.makePartials(codeObj);\n    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n    return new this.template(template, text, this, options);\n  }\n\n  Hogan.makePartials = function(codeObj) {\n    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n    for (key in template.partials) {\n      template.partials[key] = this.makePartials(template.partials[key]);\n    }\n    for (key in codeObj.subs) {\n      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n    }\n    return template;\n  }\n\n  function esc(s) {\n    return s.replace(rSlash, '\\\\\\\\')\n            .replace(rQuot, '\\\\\\\"')\n            .replace(rNewline, '\\\\n')\n            .replace(rCr, '\\\\r')\n            .replace(rLineSep, '\\\\u2028')\n            .replace(rParagraphSep, '\\\\u2029');\n  }\n\n  function chooseMethod(s) {\n    return (~s.indexOf('.')) ? 'd' : 'f';\n  }\n\n  function createPartial(node, context) {\n    var prefix = \"<\" + (context.prefix || \"\");\n    var sym = prefix + node.n + serialNo++;\n    context.partials[sym] = {name: node.n, partials: {}};\n    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n    return sym;\n  }\n\n  Hogan.codegen = {\n    '#': function(node, context) {\n      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n                      't.rs(c,p,' + 'function(c,p,t){';\n      Hogan.walk(node.nodes, context);\n      context.code += '});c.pop();}';\n    },\n\n    '^': function(node, context) {\n      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n      Hogan.walk(node.nodes, context);\n      context.code += '};';\n    },\n\n    '>': createPartial,\n    '<': function(node, context) {\n      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n      Hogan.walk(node.nodes, ctx);\n      var template = context.partials[createPartial(node, context)];\n      template.subs = ctx.subs;\n      template.partials = ctx.partials;\n    },\n\n    '$': function(node, context) {\n      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n      Hogan.walk(node.nodes, ctx);\n      context.subs[node.n] = ctx.code;\n      if (!context.inPartial) {\n        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n      }\n    },\n\n    '\\n': function(node, context) {\n      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n    },\n\n    '_v': function(node, context) {\n      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n    },\n\n    '_t': function(node, context) {\n      context.code += write('\"' + esc(node.text) + '\"');\n    },\n\n    '{': tripleStache,\n\n    '&': tripleStache\n  }\n\n  function tripleStache(node, context) {\n    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n  }\n\n  function write(s) {\n    return 't.b(' + s + ');';\n  }\n\n  Hogan.walk = function(nodelist, context) {\n    var func;\n    for (var i = 0, l = nodelist.length; i < l; i++) {\n      func = Hogan.codegen[nodelist[i].tag];\n      func && func(nodelist[i], context);\n    }\n    return context;\n  }\n\n  Hogan.parse = function(tokens, text, options) {\n    options = options || {};\n    return buildTree(tokens, '', [], options.sectionTags || []);\n  }\n\n  Hogan.cache = {};\n\n  Hogan.cacheKey = function(text, options) {\n    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n  }\n\n  Hogan.compile = function(text, options) {\n    options = options || {};\n    var key = Hogan.cacheKey(text, options);\n    var template = this.cache[key];\n\n    if (template) {\n      var partials = template.partials;\n      for (var name in partials) {\n        delete partials[name].instance;\n      }\n      return template;\n    }\n\n    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n    return this.cache[key] = template;\n  }\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\nif (typeof define === 'function' && define.amd) {\n  define(Hogan);\n}\n"],"file":"hogan.min.js"}