{"version":3,"sources":["../../src/lib-esm/side-by-side-renderer.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defaultSideBySideRendererConfig","renderUtils","defaultRenderConfig","renderNothingWhenEmpty","matchingMaxComparisons","maxLineSizeInBlockForComparison","genericTemplatesPath","SideBySideRenderer","hoganUtils","config","render","diffFiles","_this","diffsHtml","map","file","diffs","blocks","generateFileHtml","generateEmptyDiff","makeFileDiffHtml","join","content","Array","isArray","fileDiffTemplate","template","filePathTemplate","fileIconTemplate","fileTagTemplate","getFileIcon","fileHtmlId","getHtmlId","filePath","fileDiffName","filenameDiff","fileIcon","fileTag","right","left","contentClass","CSSLineClass","matcher","Rematch","newMatcherFn","newDistanceFn","e","deconstructLine","isCombined","block","fileHtml","makeHeaderHtml","header","applyLineGroupping","forEach","_a","contextLines","oldLines","newLines","applyRematchMatching","_b","processChangedLines","line","prefix","generateLineHtml","type","CONTEXT","number","oldNumber","newNumber","console","error","reduce","accomulated","html","blockLinesGroups","diffLine","lines","LineType","INSERT","push","DELETE","comparisons","maxLineSizeInBlock","Math","max","concat","elem","doMatching","matching","blockHeader","escapeForHtml","lineClass","maxLinesNumber","oldLine","newLine","diff","diffHighlight","preparedOldLine","DELETE_CHANGES","toCSSClass","preparedNewLine","INSERT_CHANGES","generateSingleHtml","lineNumber"],"mappings":"khBAWA,OACA,O,yiBAZIA,CAAAA,CAAQ,CAAG,QAA2B,UAAY,CAClDA,CAAQ,CAAGC,MAAM,CAACC,MAAP,EAAiB,SAASC,CAAT,CAAY,CACpC,IAAK,GAAIC,CAAAA,CAAJ,CAAOC,CAAC,CAAG,CAAX,CAAcC,CAAC,CAAGC,SAAS,CAACC,MAAjC,CAAyCH,CAAC,CAAGC,CAA7C,CAAgDD,CAAC,EAAjD,CAAqD,CACjDD,CAAC,CAAGG,SAAS,CAACF,CAAD,CAAb,CACA,IAAK,GAAII,CAAAA,CAAT,GAAcL,CAAAA,CAAd,EAAiB,GAAIH,MAAM,CAACS,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,CAArC,CAAwCK,CAAxC,CAAJ,CACbN,CAAC,CAACM,CAAD,CAAD,CAAOL,CAAC,CAACK,CAAD,CADZ,CAEH,CACD,MAAON,CAAAA,CACV,CAPD,CAQA,MAAOH,CAAAA,CAAQ,CAACa,KAAT,CAAe,IAAf,CAAqBN,SAArB,CACV,C,CAIUO,CAA+B,CAAGd,CAAQ,CAACA,CAAQ,CAAC,EAAD,CAAKe,CAAW,CAACC,mBAAjB,CAAT,CAAgD,CAAEC,sBAAsB,GAAxB,CAAiCC,sBAAsB,CAAE,IAAzD,CAA+DC,+BAA+B,CAAE,GAAhG,CAAhD,C,wCACjDC,CAAAA,CAAoB,CAAG,S,CAIvBC,CAAkB,CAAI,UAAY,CAClC,QAASA,CAAAA,CAAT,CAA4BC,CAA5B,CAAwCC,CAAxC,CAAgD,CAC5C,GAAe,IAAK,EAAhB,GAAAA,CAAJ,CAAuB,CAAEA,CAAM,CAAG,EAAK,CACvC,KAAKD,UAAL,CAAkBA,CAAlB,CACA,KAAKC,MAAL,CAAcvB,CAAQ,CAACA,CAAQ,CAAC,EAAD,CAAKc,CAAL,CAAT,CAAgDS,CAAhD,CACzB,CACDF,CAAkB,CAACX,SAAnB,CAA6Bc,MAA7B,CAAsC,SAAUC,CAAV,CAAqB,IACnDC,CAAAA,CAAK,CAAG,IAD2C,CAEnDC,CAAS,CAAGF,CAAS,CACpBG,GADW,CACP,SAAUC,CAAV,CAAgB,CACrB,GAAIC,CAAAA,CAAJ,CACA,GAAID,CAAI,CAACE,MAAL,CAAYvB,MAAhB,CAAwB,CACpBsB,CAAK,CAAGJ,CAAK,CAACM,gBAAN,CAAuBH,CAAvB,CACX,CAFD,IAGK,CACDC,CAAK,CAAGJ,CAAK,CAACO,iBAAN,EACX,CACD,MAAOP,CAAAA,CAAK,CAACQ,gBAAN,CAAuBL,CAAvB,CAA6BC,CAA7B,CACV,CAVe,EAWXK,IAXW,CAWN,IAXM,CAFuC,CAcvD,MAAO,MAAKb,UAAL,CAAgBE,MAAhB,CAAuBJ,CAAvB,CAA6C,SAA7C,CAAwD,CAAEgB,OAAO,CAAET,CAAX,CAAxD,CACV,CAfD,CAgBAN,CAAkB,CAACX,SAAnB,CAA6BwB,gBAA7B,CAAgD,SAAUL,CAAV,CAAgBC,CAAhB,CAAuB,CACnE,GAAI,KAAKP,MAAL,CAAYN,sBAAZ,EAAsCoB,KAAK,CAACC,OAAN,CAAcT,CAAI,CAACE,MAAnB,CAAtC,EAA2F,CAAvB,GAAAF,CAAI,CAACE,MAAL,CAAYvB,MAApF,CACI,MAAO,EAAP,CAF+D,GAG/D+B,CAAAA,CAAgB,CAAG,KAAKjB,UAAL,CAAgBkB,QAAhB,CA5BP,cA4BO,CAA4C,WAA5C,CAH4C,CAI/DC,CAAgB,CAAG,KAAKnB,UAAL,CAAgBkB,QAAhB,CAAyBpB,CAAzB,CAA+C,WAA/C,CAJ4C,CAK/DsB,CAAgB,CAAG,KAAKpB,UAAL,CAAgBkB,QAAhB,CA7BF,MA6BE,CAAiD,MAAjD,CAL4C,CAM/DG,CAAe,CAAG,KAAKrB,UAAL,CAAgBkB,QAAhB,CA7BF,KA6BE,CAAgDzB,CAAW,CAAC6B,WAAZ,CAAwBf,CAAxB,CAAhD,CAN6C,CAOnE,MAAOU,CAAAA,CAAgB,CAACf,MAAjB,CAAwB,CAC3BK,IAAI,CAAEA,CADqB,CAE3BgB,UAAU,CAAE9B,CAAW,CAAC+B,SAAZ,CAAsBjB,CAAtB,CAFe,CAG3BC,KAAK,CAAEA,CAHoB,CAI3BiB,QAAQ,CAAEN,CAAgB,CAACjB,MAAjB,CAAwB,CAC9BwB,YAAY,CAAEjC,CAAW,CAACkC,YAAZ,CAAyBpB,CAAzB,CADgB,CAAxB,CAEP,CACCqB,QAAQ,CAAER,CADX,CAECS,OAAO,CAAER,CAFV,CAFO,CAJiB,CAAxB,CAWV,CAlBD,CAmBAtB,CAAkB,CAACX,SAAnB,CAA6BuB,iBAA7B,CAAiD,UAAY,CACzD,MAAO,CACHmB,KAAK,CAAE,EADJ,CAEHC,IAAI,CAAE,KAAK/B,UAAL,CAAgBE,MAAhB,CAAuBJ,CAAvB,CAA6C,YAA7C,CAA2D,CAC7DkC,YAAY,CAAE,oBAD+C,CAE7DC,YAAY,CAAExC,CAAW,CAACwC,YAFmC,CAA3D,CAFH,CAOV,CARD,CASAlC,CAAkB,CAACX,SAAnB,CAA6BsB,gBAA7B,CAAgD,SAAUH,CAAV,CAAgB,IACxDH,CAAAA,CAAK,CAAG,IADgD,CAExD8B,CAAO,CAAGC,CAAO,CAACC,YAAR,CAAqBD,CAAO,CAACE,aAAR,CAAsB,SAAUC,CAAV,CAAa,CAAE,MAAO7C,CAAAA,CAAW,CAAC8C,eAAZ,CAA4BD,CAAC,CAACxB,OAA9B,CAAuCP,CAAI,CAACiC,UAA5C,EAAwD1B,OAAU,CAA9G,CAArB,CAF8C,CAG5D,MAAOP,CAAAA,CAAI,CAACE,MAAL,CACFH,GADE,CACE,SAAUmC,CAAV,CAAiB,CACtB,GAAIC,CAAAA,CAAQ,CAAG,CACXX,IAAI,CAAE3B,CAAK,CAACuC,cAAN,CAAqBF,CAAK,CAACG,MAA3B,CADK,CAEXd,KAAK,CAAE1B,CAAK,CAACuC,cAAN,CAAqB,EAArB,CAFI,CAAf,CAIAvC,CAAK,CAACyC,kBAAN,CAAyBJ,CAAzB,EAAgCK,OAAhC,CAAwC,SAAUC,CAAV,CAAc,CAClD,GAAIC,CAAAA,CAAY,CAAGD,CAAE,CAAC,CAAD,CAArB,CAA0BE,CAAQ,CAAGF,CAAE,CAAC,CAAD,CAAvC,CAA4CG,CAAQ,CAAGH,CAAE,CAAC,CAAD,CAAzD,CACA,GAAIE,CAAQ,CAAC/D,MAAT,EAAmBgE,CAAQ,CAAChE,MAA5B,EAAsC,CAAC8D,CAAY,CAAC9D,MAAxD,CAAgE,CAC5DkB,CAAK,CAAC+C,oBAAN,CAA2BF,CAA3B,CAAqCC,CAArC,CAA+ChB,CAA/C,EAAwD5B,GAAxD,CAA4D,SAAUyC,CAAV,CAAc,IAClEE,CAAAA,CAAQ,CAAGF,CAAE,CAAC,CAAD,CADqD,CAChDG,CAAQ,CAAGH,CAAE,CAAC,CAAD,CADmC,CAElEK,CAAE,CAAGhD,CAAK,CAACiD,mBAAN,CAA0B9C,CAAI,CAACiC,UAA/B,CAA2CS,CAA3C,CAAqDC,CAArD,CAF6D,CAEGnB,CAAI,CAAGqB,CAAE,CAACrB,IAFb,CAEmBD,CAAK,CAAGsB,CAAE,CAACtB,KAF9B,CAGtEY,CAAQ,CAACX,IAAT,EAAiBA,CAAjB,CACAW,CAAQ,CAACZ,KAAT,EAAkBA,CACrB,CALD,CAMH,CAPD,IAQK,IAAIkB,CAAY,CAAC9D,MAAjB,CAAyB,CAC1B8D,CAAY,CAACF,OAAb,CAAqB,SAAUQ,CAAV,CAAgB,IAC7BP,CAAAA,CAAE,CAAGtD,CAAW,CAAC8C,eAAZ,CAA4Be,CAAI,CAACxC,OAAjC,CAA0CP,CAAI,CAACiC,UAA/C,CADwB,CACoCe,CAAM,CAAGR,CAAE,CAACQ,MADhD,CACwDzC,CAAO,CAAGiC,CAAE,CAACjC,OADrE,CAE7BsC,CAAE,CAAGhD,CAAK,CAACoD,gBAAN,CAAuB,CAC5BC,IAAI,CAAEhE,CAAW,CAACwC,YAAZ,CAAyByB,OADH,CAE5BH,MAAM,CAAEA,CAFoB,CAG5BzC,OAAO,CAAEA,CAHmB,CAI5B6C,MAAM,CAAEL,CAAI,CAACM,SAJe,CAAvB,CAKN,CACCH,IAAI,CAAEhE,CAAW,CAACwC,YAAZ,CAAyByB,OADhC,CAECH,MAAM,CAAEA,CAFT,CAGCzC,OAAO,CAAEA,CAHV,CAIC6C,MAAM,CAAEL,CAAI,CAACO,SAJd,CALM,CAFwB,CAY7B9B,CAAI,CAAGqB,CAAE,CAACrB,IAZmB,CAYbD,CAAK,CAAGsB,CAAE,CAACtB,KAZE,CAajCY,CAAQ,CAACX,IAAT,EAAiBA,CAAjB,CACAW,CAAQ,CAACZ,KAAT,EAAkBA,CACrB,CAfD,CAgBH,CAjBI,IAkBA,IAAImB,CAAQ,CAAC/D,MAAT,EAAmBgE,CAAQ,CAAChE,MAAhC,CAAwC,CACzC,GAAIkE,CAAAA,CAAE,CAAGhD,CAAK,CAACiD,mBAAN,CAA0B9C,CAAI,CAACiC,UAA/B,CAA2CS,CAA3C,CAAqDC,CAArD,CAAT,CAAyEnB,CAAI,CAAGqB,CAAE,CAACrB,IAAnF,CAAyFD,CAAK,CAAGsB,CAAE,CAACtB,KAApG,CACAY,CAAQ,CAACX,IAAT,EAAiBA,CAAjB,CACAW,CAAQ,CAACZ,KAAT,EAAkBA,CACrB,CAJI,IAKA,CACDgC,OAAO,CAACC,KAAR,CAAc,wDAAd,CAAwEf,CAAxE,CAAsFC,CAAtF,CAAgGC,CAAhG,CACH,CACJ,CApCD,EAqCA,MAAOR,CAAAA,CACV,CA5CM,EA6CFsB,MA7CE,CA6CK,SAAUC,CAAV,CAAuBC,CAAvB,CAA6B,CACrC,MAAO,CAAEnC,IAAI,CAAEkC,CAAW,CAAClC,IAAZ,CAAmBmC,CAAI,CAACnC,IAAhC,CAAsCD,KAAK,CAAEmC,CAAW,CAACnC,KAAZ,CAAoBoC,CAAI,CAACpC,KAAtE,CACV,CA/CM,CA+CJ,CAAEC,IAAI,CAAE,EAAR,CAAYD,KAAK,CAAE,EAAnB,CA/CI,CAgDV,CAnDD,CAoDA/B,CAAkB,CAACX,SAAnB,CAA6ByD,kBAA7B,CAAkD,SAAUJ,CAAV,CAAiB,CAI/D,OAHI0B,CAAAA,CAAgB,CAAG,EAGvB,CAFIlB,CAAQ,CAAG,EAEf,CADIC,CAAQ,CAAG,EACf,CAASnE,CAAC,CAAG,CAAb,CACQqF,CADR,CAAgBrF,CAAC,CAAG0D,CAAK,CAAC4B,KAAN,CAAYnF,MAAhC,CAAwCH,CAAC,EAAzC,CAA6C,CACrCqF,CADqC,CAC1B3B,CAAK,CAAC4B,KAAN,CAAYtF,CAAZ,CAD0B,CAEzC,GAAKqF,CAAQ,CAACX,IAAT,GAAkBa,WAASC,MAA3B,EAAqCrB,CAAQ,CAAChE,MAA/C,EACCkF,CAAQ,CAACX,IAAT,GAAkBa,WAASZ,OAA3B,EAAwD,CAAlB,CAAAT,CAAQ,CAAC/D,MADpD,CACiE,CAC7DiF,CAAgB,CAACK,IAAjB,CAAsB,CAAC,EAAD,CAAKvB,CAAL,CAAeC,CAAf,CAAtB,EACAD,CAAQ,CAAG,EAAX,CACAC,CAAQ,CAAG,EACd,CACD,GAAIkB,CAAQ,CAACX,IAAT,GAAkBa,WAASZ,OAA/B,CAAwC,CACpCS,CAAgB,CAACK,IAAjB,CAAsB,CAAC,CAACJ,CAAD,CAAD,CAAa,EAAb,CAAiB,EAAjB,CAAtB,CACH,CAFD,IAGK,IAAIA,CAAQ,CAACX,IAAT,GAAkBa,WAASC,MAA3B,EAAyD,CAApB,GAAAtB,CAAQ,CAAC/D,MAAlD,CAAgE,CACjEiF,CAAgB,CAACK,IAAjB,CAAsB,CAAC,EAAD,CAAK,EAAL,CAAS,CAACJ,CAAD,CAAT,CAAtB,CACH,CAFI,IAGA,IAAIA,CAAQ,CAACX,IAAT,GAAkBa,WAASC,MAA3B,EAAuD,CAAlB,CAAAtB,CAAQ,CAAC/D,MAAlD,CAA8D,CAC/DgE,CAAQ,CAACsB,IAAT,CAAcJ,CAAd,CACH,CAFI,IAGA,IAAIA,CAAQ,CAACX,IAAT,GAAkBa,WAASG,MAA/B,CAAuC,CACxCxB,CAAQ,CAACuB,IAAT,CAAcJ,CAAd,CACH,CACJ,CACD,GAAInB,CAAQ,CAAC/D,MAAT,EAAmBgE,CAAQ,CAAChE,MAAhC,CAAwC,CACpCiF,CAAgB,CAACK,IAAjB,CAAsB,CAAC,EAAD,CAAKvB,CAAL,CAAeC,CAAf,CAAtB,EACAD,CAAQ,CAAG,EAAX,CACAC,CAAQ,CAAG,EACd,CACD,MAAOiB,CAAAA,CACV,CA/BD,CAgCApE,CAAkB,CAACX,SAAnB,CAA6B+D,oBAA7B,CAAoD,SAAUF,CAAV,CAAoBC,CAApB,CAA8BhB,CAA9B,CAAuC,IACnFwC,CAAAA,CAAW,CAAGzB,CAAQ,CAAC/D,MAAT,CAAkBgE,CAAQ,CAAChE,MAD0C,CAEnFyF,CAAkB,CAAGC,IAAI,CAACC,GAAL,CAAStF,KAAT,CAAe,IAAf,CAAqB,CAAC,CAAD,EAAIuF,MAAJ,CAAW7B,CAAQ,CAAC6B,MAAT,CAAgB5B,CAAhB,EAA0B5C,GAA1B,CAA8B,SAAUyE,CAAV,CAAgB,CAAE,MAAOA,CAAAA,CAAI,CAACjE,OAAL,CAAa5B,MAAS,CAA7E,CAAX,CAArB,CAF8D,CAGnF8F,CAAU,CAAGN,CAAW,CAAG,KAAKzE,MAAL,CAAYL,sBAA1B,EACb+E,CAAkB,CAAG,KAAK1E,MAAL,CAAYJ,+BADpB,GAEa,OAAzB,QAAKI,MAAL,CAAYgF,QAAZ,EAA6D,OAAzB,QAAKhF,MAAL,CAAYgF,QAFpC,CAHsE,CAMvF,MAAOD,CAAAA,CAAU,CAAG9C,CAAO,CAACe,CAAD,CAAWC,CAAX,CAAV,CAAiC,CAAC,CAACD,CAAD,CAAWC,CAAX,CAAD,CACrD,CAPD,CAQAnD,CAAkB,CAACX,SAAnB,CAA6BuD,cAA7B,CAA8C,SAAUuC,CAAV,CAAuB,CACjE,MAAO,MAAKlF,UAAL,CAAgBE,MAAhB,CAAuBJ,CAAvB,CAA6C,cAA7C,CAA6D,CAChEmC,YAAY,CAAExC,CAAW,CAACwC,YADsC,CAEhEiD,WAAW,CAAEzF,CAAW,CAAC0F,aAAZ,CAA0BD,CAA1B,CAFmD,CAGhEE,SAAS,CAAE,0BAHqD,CAIhEpD,YAAY,CAAE,oBAJkD,CAA7D,CAMV,CAPD,CAQAjC,CAAkB,CAACX,SAAnB,CAA6BiE,mBAA7B,CAAmD,SAAUb,CAAV,CAAsBS,CAAtB,CAAgCC,CAAhC,CAA0C,CAMzF,OALIR,CAAAA,CAAQ,CAAG,CACXZ,KAAK,CAAE,EADI,CAEXC,IAAI,CAAE,EAFK,CAKf,CADIsD,CAAc,CAAGT,IAAI,CAACC,GAAL,CAAS5B,CAAQ,CAAC/D,MAAlB,CAA0BgE,CAAQ,CAAChE,MAAnC,CACrB,CAASH,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGsG,CAApB,CAAoCtG,CAAC,EAArC,CAAyC,IACjCuG,CAAAA,CAAO,CAAGrC,CAAQ,CAAClE,CAAD,CADe,CAEjCwG,CAAO,CAAGrC,CAAQ,CAACnE,CAAD,CAFe,CAGjCyG,CAAI,CAAGF,CAAO,SAAP,EAAyBC,CAAO,SAAhC,CACL9F,CAAW,CAACgG,aAAZ,CAA0BH,CAAO,CAACxE,OAAlC,CAA2CyE,CAAO,CAACzE,OAAnD,CAA4D0B,CAA5D,CAAwE,KAAKvC,MAA7E,CADK,OAH0B,CAMjCyF,CAAe,CAAGJ,CAAO,SAAP,EAAyBA,CAAO,CAAC1B,SAAR,SAAzB,CAChBlF,CAAQ,CAACA,CAAQ,CAAC,EAAD,CAAM8G,CAAI,SAAJ,CACnB,CACEjC,MAAM,CAAEiC,CAAI,CAACF,OAAL,CAAa/B,MADvB,CAEEzC,OAAO,CAAE0E,CAAI,CAACF,OAAL,CAAaxE,OAFxB,CAGE2C,IAAI,CAAEhE,CAAW,CAACwC,YAAZ,CAAyB0D,cAHjC,CADmB,CAMnBjH,CAAQ,CAACA,CAAQ,CAAC,EAAD,CAAKe,CAAW,CAAC8C,eAAZ,CAA4B+C,CAAO,CAACxE,OAApC,CAA6C0B,CAA7C,CAAL,CAAT,CAAyE,CAAEiB,IAAI,CAAEhE,CAAW,CAACmG,UAAZ,CAAuBN,CAAO,CAAC7B,IAA/B,CAAR,CAAzE,CANK,CAAT,CAMgI,CAAEE,MAAM,CAAE2B,CAAO,CAAC1B,SAAlB,CANhI,CADQ,OANe,CAcjCiC,CAAe,CAAGN,CAAO,SAAP,EAAyBA,CAAO,CAAC1B,SAAR,SAAzB,CAChBnF,CAAQ,CAACA,CAAQ,CAAC,EAAD,CAAM8G,CAAI,SAAJ,CACnB,CACEjC,MAAM,CAAEiC,CAAI,CAACD,OAAL,CAAahC,MADvB,CAEEzC,OAAO,CAAE0E,CAAI,CAACD,OAAL,CAAazE,OAFxB,CAGE2C,IAAI,CAAEhE,CAAW,CAACwC,YAAZ,CAAyB6D,cAHjC,CADmB,CAMnBpH,CAAQ,CAACA,CAAQ,CAAC,EAAD,CAAKe,CAAW,CAAC8C,eAAZ,CAA4BgD,CAAO,CAACzE,OAApC,CAA6C0B,CAA7C,CAAL,CAAT,CAAyE,CAAEiB,IAAI,CAAEhE,CAAW,CAACmG,UAAZ,CAAuBL,CAAO,CAAC9B,IAA/B,CAAR,CAAzE,CANK,CAAT,CAMgI,CAAEE,MAAM,CAAE4B,CAAO,CAAC1B,SAAlB,CANhI,CADQ,OAde,CAsBjCd,CAAE,CAAG,KAAKS,gBAAL,CAAsBkC,CAAtB,CAAuCG,CAAvC,CAtB4B,CAsB6B9D,CAAI,CAAGgB,CAAE,CAAChB,IAtBvC,CAsB6CD,CAAK,CAAGiB,CAAE,CAACjB,KAtBxD,CAuBrCY,CAAQ,CAACX,IAAT,EAAiBA,CAAjB,CACAW,CAAQ,CAACZ,KAAT,EAAkBA,CACrB,CACD,MAAOY,CAAAA,CACV,CAjCD,CAkCA3C,CAAkB,CAACX,SAAnB,CAA6BoE,gBAA7B,CAAgD,SAAU8B,CAAV,CAAmBC,CAAnB,CAA4B,CACxE,MAAO,CACHxD,IAAI,CAAE,KAAKgE,kBAAL,CAAwBT,CAAxB,CADH,CAEHxD,KAAK,CAAE,KAAKiE,kBAAL,CAAwBR,CAAxB,CAFJ,CAIV,CALD,CAMAxF,CAAkB,CAACX,SAAnB,CAA6B2G,kBAA7B,CAAkD,SAAUzC,CAAV,CAAgB,IAE1DtB,CAAAA,CAAY,CAAG,oBAF2C,CAG9D,MAAO,MAAKhC,UAAL,CAAgBE,MAAhB,CAAuBJ,CAAvB,CAA6C,MAA7C,CAAqD,CACxD2D,IAAI,CAAE,CAAU,IAAT,GAAAH,CAAI,EAAsB,IAAK,EAAd,GAAAA,CAAjB,CAAmC,IAAK,EAAxC,CAA4CA,CAAI,CAACG,IAAlD,GAA2DhE,CAAW,CAACwC,YAAZ,CAAyByB,OAAzB,CAAmC,uBAD5C,CAExD0B,SAAS,CAAE9B,CAAI,SAAJ,qFAF6C,CAGxDtB,YAAY,CAAEsB,CAAI,SAAJ,CAAqBtB,CAArB,CAAoCA,CAAY,CAAG,iCAHT,CAIxDuB,MAAM,CAAgE,GAA9D,IAAU,IAAT,GAAAD,CAAI,EAAsB,IAAK,EAAd,GAAAA,CAAjB,CAAmC,IAAK,EAAxC,CAA4CA,CAAI,CAACC,MAAlD,EAAoE,QAApE,CAAwF,IAAT,GAAAD,CAAI,EAAsB,IAAK,EAAd,GAAAA,CAAjB,CAAmC,IAAK,EAAxC,CAA4CA,CAAI,CAACC,MAJhF,CAKxDzC,OAAO,CAAW,IAAT,GAAAwC,CAAI,EAAsB,IAAK,EAAd,GAAAA,CAAjB,CAAmC,IAAK,EAAxC,CAA4CA,CAAI,CAACxC,OALF,CAMxDkF,UAAU,CAAW,IAAT,GAAA1C,CAAI,EAAsB,IAAK,EAAd,GAAAA,CAAjB,CAAmC,IAAK,EAAxC,CAA4CA,CAAI,CAACK,MANL,CAArD,CAQV,CAXD,CAYA,MAAO5D,CAAAA,CACV,CA3MyB,E,WA4MXA,C","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as Rematch from './rematch';\nimport * as renderUtils from './render-utils';\nimport { LineType, } from './types';\nexport var defaultSideBySideRendererConfig = __assign(__assign({}, renderUtils.defaultRenderConfig), { renderNothingWhenEmpty: false, matchingMaxComparisons: 2500, maxLineSizeInBlockForComparison: 200 });\nvar genericTemplatesPath = 'generic';\nvar baseTemplatesPath = 'side-by-side';\nvar iconsBaseTemplatesPath = 'icon';\nvar tagsBaseTemplatesPath = 'tag';\nvar SideBySideRenderer = (function () {\n    function SideBySideRenderer(hoganUtils, config) {\n        if (config === void 0) { config = {}; }\n        this.hoganUtils = hoganUtils;\n        this.config = __assign(__assign({}, defaultSideBySideRendererConfig), config);\n    }\n    SideBySideRenderer.prototype.render = function (diffFiles) {\n        var _this = this;\n        var diffsHtml = diffFiles\n            .map(function (file) {\n            var diffs;\n            if (file.blocks.length) {\n                diffs = _this.generateFileHtml(file);\n            }\n            else {\n                diffs = _this.generateEmptyDiff();\n            }\n            return _this.makeFileDiffHtml(file, diffs);\n        })\n            .join('\\n');\n        return this.hoganUtils.render(genericTemplatesPath, 'wrapper', { content: diffsHtml });\n    };\n    SideBySideRenderer.prototype.makeFileDiffHtml = function (file, diffs) {\n        if (this.config.renderNothingWhenEmpty && Array.isArray(file.blocks) && file.blocks.length === 0)\n            return '';\n        var fileDiffTemplate = this.hoganUtils.template(baseTemplatesPath, 'file-diff');\n        var filePathTemplate = this.hoganUtils.template(genericTemplatesPath, 'file-path');\n        var fileIconTemplate = this.hoganUtils.template(iconsBaseTemplatesPath, 'file');\n        var fileTagTemplate = this.hoganUtils.template(tagsBaseTemplatesPath, renderUtils.getFileIcon(file));\n        return fileDiffTemplate.render({\n            file: file,\n            fileHtmlId: renderUtils.getHtmlId(file),\n            diffs: diffs,\n            filePath: filePathTemplate.render({\n                fileDiffName: renderUtils.filenameDiff(file),\n            }, {\n                fileIcon: fileIconTemplate,\n                fileTag: fileTagTemplate,\n            }),\n        });\n    };\n    SideBySideRenderer.prototype.generateEmptyDiff = function () {\n        return {\n            right: '',\n            left: this.hoganUtils.render(genericTemplatesPath, 'empty-diff', {\n                contentClass: 'd2h-code-side-line',\n                CSSLineClass: renderUtils.CSSLineClass,\n            }),\n        };\n    };\n    SideBySideRenderer.prototype.generateFileHtml = function (file) {\n        var _this = this;\n        var matcher = Rematch.newMatcherFn(Rematch.newDistanceFn(function (e) { return renderUtils.deconstructLine(e.content, file.isCombined).content; }));\n        return file.blocks\n            .map(function (block) {\n            var fileHtml = {\n                left: _this.makeHeaderHtml(block.header),\n                right: _this.makeHeaderHtml(''),\n            };\n            _this.applyLineGroupping(block).forEach(function (_a) {\n                var contextLines = _a[0], oldLines = _a[1], newLines = _a[2];\n                if (oldLines.length && newLines.length && !contextLines.length) {\n                    _this.applyRematchMatching(oldLines, newLines, matcher).map(function (_a) {\n                        var oldLines = _a[0], newLines = _a[1];\n                        var _b = _this.processChangedLines(file.isCombined, oldLines, newLines), left = _b.left, right = _b.right;\n                        fileHtml.left += left;\n                        fileHtml.right += right;\n                    });\n                }\n                else if (contextLines.length) {\n                    contextLines.forEach(function (line) {\n                        var _a = renderUtils.deconstructLine(line.content, file.isCombined), prefix = _a.prefix, content = _a.content;\n                        var _b = _this.generateLineHtml({\n                            type: renderUtils.CSSLineClass.CONTEXT,\n                            prefix: prefix,\n                            content: content,\n                            number: line.oldNumber,\n                        }, {\n                            type: renderUtils.CSSLineClass.CONTEXT,\n                            prefix: prefix,\n                            content: content,\n                            number: line.newNumber,\n                        }), left = _b.left, right = _b.right;\n                        fileHtml.left += left;\n                        fileHtml.right += right;\n                    });\n                }\n                else if (oldLines.length || newLines.length) {\n                    var _b = _this.processChangedLines(file.isCombined, oldLines, newLines), left = _b.left, right = _b.right;\n                    fileHtml.left += left;\n                    fileHtml.right += right;\n                }\n                else {\n                    console.error('Unknown state reached while processing groups of lines', contextLines, oldLines, newLines);\n                }\n            });\n            return fileHtml;\n        })\n            .reduce(function (accomulated, html) {\n            return { left: accomulated.left + html.left, right: accomulated.right + html.right };\n        }, { left: '', right: '' });\n    };\n    SideBySideRenderer.prototype.applyLineGroupping = function (block) {\n        var blockLinesGroups = [];\n        var oldLines = [];\n        var newLines = [];\n        for (var i = 0; i < block.lines.length; i++) {\n            var diffLine = block.lines[i];\n            if ((diffLine.type !== LineType.INSERT && newLines.length) ||\n                (diffLine.type === LineType.CONTEXT && oldLines.length > 0)) {\n                blockLinesGroups.push([[], oldLines, newLines]);\n                oldLines = [];\n                newLines = [];\n            }\n            if (diffLine.type === LineType.CONTEXT) {\n                blockLinesGroups.push([[diffLine], [], []]);\n            }\n            else if (diffLine.type === LineType.INSERT && oldLines.length === 0) {\n                blockLinesGroups.push([[], [], [diffLine]]);\n            }\n            else if (diffLine.type === LineType.INSERT && oldLines.length > 0) {\n                newLines.push(diffLine);\n            }\n            else if (diffLine.type === LineType.DELETE) {\n                oldLines.push(diffLine);\n            }\n        }\n        if (oldLines.length || newLines.length) {\n            blockLinesGroups.push([[], oldLines, newLines]);\n            oldLines = [];\n            newLines = [];\n        }\n        return blockLinesGroups;\n    };\n    SideBySideRenderer.prototype.applyRematchMatching = function (oldLines, newLines, matcher) {\n        var comparisons = oldLines.length * newLines.length;\n        var maxLineSizeInBlock = Math.max.apply(null, [0].concat(oldLines.concat(newLines).map(function (elem) { return elem.content.length; })));\n        var doMatching = comparisons < this.config.matchingMaxComparisons &&\n            maxLineSizeInBlock < this.config.maxLineSizeInBlockForComparison &&\n            (this.config.matching === 'lines' || this.config.matching === 'words');\n        return doMatching ? matcher(oldLines, newLines) : [[oldLines, newLines]];\n    };\n    SideBySideRenderer.prototype.makeHeaderHtml = function (blockHeader) {\n        return this.hoganUtils.render(genericTemplatesPath, 'block-header', {\n            CSSLineClass: renderUtils.CSSLineClass,\n            blockHeader: renderUtils.escapeForHtml(blockHeader),\n            lineClass: 'd2h-code-side-linenumber',\n            contentClass: 'd2h-code-side-line',\n        });\n    };\n    SideBySideRenderer.prototype.processChangedLines = function (isCombined, oldLines, newLines) {\n        var fileHtml = {\n            right: '',\n            left: '',\n        };\n        var maxLinesNumber = Math.max(oldLines.length, newLines.length);\n        for (var i = 0; i < maxLinesNumber; i++) {\n            var oldLine = oldLines[i];\n            var newLine = newLines[i];\n            var diff = oldLine !== undefined && newLine !== undefined\n                ? renderUtils.diffHighlight(oldLine.content, newLine.content, isCombined, this.config)\n                : undefined;\n            var preparedOldLine = oldLine !== undefined && oldLine.oldNumber !== undefined\n                ? __assign(__assign({}, (diff !== undefined\n                    ? {\n                        prefix: diff.oldLine.prefix,\n                        content: diff.oldLine.content,\n                        type: renderUtils.CSSLineClass.DELETE_CHANGES,\n                    }\n                    : __assign(__assign({}, renderUtils.deconstructLine(oldLine.content, isCombined)), { type: renderUtils.toCSSClass(oldLine.type) }))), { number: oldLine.oldNumber }) : undefined;\n            var preparedNewLine = newLine !== undefined && newLine.newNumber !== undefined\n                ? __assign(__assign({}, (diff !== undefined\n                    ? {\n                        prefix: diff.newLine.prefix,\n                        content: diff.newLine.content,\n                        type: renderUtils.CSSLineClass.INSERT_CHANGES,\n                    }\n                    : __assign(__assign({}, renderUtils.deconstructLine(newLine.content, isCombined)), { type: renderUtils.toCSSClass(newLine.type) }))), { number: newLine.newNumber }) : undefined;\n            var _a = this.generateLineHtml(preparedOldLine, preparedNewLine), left = _a.left, right = _a.right;\n            fileHtml.left += left;\n            fileHtml.right += right;\n        }\n        return fileHtml;\n    };\n    SideBySideRenderer.prototype.generateLineHtml = function (oldLine, newLine) {\n        return {\n            left: this.generateSingleHtml(oldLine),\n            right: this.generateSingleHtml(newLine),\n        };\n    };\n    SideBySideRenderer.prototype.generateSingleHtml = function (line) {\n        var lineClass = 'd2h-code-side-linenumber';\n        var contentClass = 'd2h-code-side-line';\n        return this.hoganUtils.render(genericTemplatesPath, 'line', {\n            type: (line === null || line === void 0 ? void 0 : line.type) || renderUtils.CSSLineClass.CONTEXT + \" d2h-emptyplaceholder\",\n            lineClass: line !== undefined ? lineClass : lineClass + \" d2h-code-side-emptyplaceholder\",\n            contentClass: line !== undefined ? contentClass : contentClass + \" d2h-code-side-emptyplaceholder\",\n            prefix: (line === null || line === void 0 ? void 0 : line.prefix) === ' ' ? '&nbsp;' : line === null || line === void 0 ? void 0 : line.prefix,\n            content: line === null || line === void 0 ? void 0 : line.content,\n            lineNumber: line === null || line === void 0 ? void 0 : line.number,\n        });\n    };\n    return SideBySideRenderer;\n}());\nexport default SideBySideRenderer;\n//# sourceMappingURL=side-by-side-renderer.js.map"],"file":"side-by-side-renderer.min.js"}