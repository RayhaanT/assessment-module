define ("qtype_coderunner/lib-esm/ui/js/highlight-helpers.js",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.nodeStream=d;a.mergeStreams=function(a,d,e){var k=0,l="",m=[];function f(a){var b;return null!==a&&(null===(b=a)||void 0===b?void 0:b.attributes)!==void 0}function g(){if(!a.length||!d.length){return a.length?a:d}if(a[0].offset!==d[0].offset){return a[0].offset<d[0].offset?a:d}return"start"===d[0].event?a:d}function h(a){if(!f(a)){throw new Error("Node is not an Element")}l+="<"+c(a)+" "+[].map.call(a.attributes,function(a){return a.nodeName+"=\""+b(a.value).replace(/"/g,"&quot;")+"\""}).join(" ")+">"}function i(a){l+="</"+c(a)+">"}function j(a){("start"===a.event?h:i)(a.node)}while(a.length||d.length){var n=g();l+=b(e.substring(k,n[0].offset));k=n[0].offset;if(n===a){m.reverse().forEach(i);do{j(n.splice(0,1)[0]);n=g()}while(n===a&&n.length&&n[0].offset===k);m.reverse().forEach(h)}else{if("start"===n[0].event){m.push(n[0].node)}else{m.pop()}j(n.splice(0,1)[0])}}return l+b(e.substr(k))};function b(a){return a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function c(a){return a.nodeName.toLowerCase()}function d(a){var b=[],d=function(a,e){for(var f=a.firstChild;f;f=f.nextSibling){if(3===f.nodeType&&null!==f.nodeValue){e+=f.nodeValue.length}else if(1===f.nodeType){b.push({event:"start",offset:e,node:f});e=d(f,e);if(!c(f).match(/br|hr|img|input/)){b.push({event:"stop",offset:e,node:f})}}}return e};d(a,0);return b}});
//# sourceMappingURL=highlight.min.js-helpers.js.map
