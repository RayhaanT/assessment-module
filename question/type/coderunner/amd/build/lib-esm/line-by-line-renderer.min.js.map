{"version":3,"sources":["../../src/lib-esm/line-by-line-renderer.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defaultLineByLineRendererConfig","renderUtils","defaultRenderConfig","renderNothingWhenEmpty","matchingMaxComparisons","maxLineSizeInBlockForComparison","genericTemplatesPath","baseTemplatesPath","LineByLineRenderer","hoganUtils","config","render","diffFiles","_this","diffsHtml","map","file","diffs","blocks","generateFileHtml","generateEmptyDiff","makeFileDiffHtml","join","content","Array","isArray","fileDiffTemplate","template","filePathTemplate","fileIconTemplate","fileTagTemplate","getFileIcon","fileHtmlId","getHtmlId","filePath","fileDiffName","filenameDiff","fileIcon","fileTag","contentClass","CSSLineClass","matcher","Rematch","newMatcherFn","newDistanceFn","e","deconstructLine","isCombined","block","lines","blockHeader","escapeForHtml","header","lineClass","applyLineGroupping","forEach","_a","contextLines","oldLines","newLines","applyRematchMatching","_b","processChangedLines","left","right","line","prefix","generateSingleLineHtml","type","CONTEXT","oldNumber","newNumber","console","error","blockLinesGroups","diffLine","LineType","INSERT","push","DELETE","comparisons","maxLineSizeInBlock","Math","max","concat","elem","doMatching","matching","fileHtml","maxLinesNumber","oldLine","newLine","diff","diffHighlight","preparedOldLine","DELETE_CHANGES","toCSSClass","preparedNewLine","INSERT_CHANGES","generateLineHtml","lineNumberHtml","lineNumber"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as Rematch from './rematch';\nimport * as renderUtils from './render-utils';\nimport { LineType, } from './types';\nexport var defaultLineByLineRendererConfig = __assign(__assign({}, renderUtils.defaultRenderConfig), { renderNothingWhenEmpty: false, matchingMaxComparisons: 2500, maxLineSizeInBlockForComparison: 200 });\nvar genericTemplatesPath = 'generic';\nvar baseTemplatesPath = 'line-by-line';\nvar iconsBaseTemplatesPath = 'icon';\nvar tagsBaseTemplatesPath = 'tag';\nvar LineByLineRenderer = (function () {\n    function LineByLineRenderer(hoganUtils, config) {\n        if (config === void 0) { config = {}; }\n        this.hoganUtils = hoganUtils;\n        this.config = __assign(__assign({}, defaultLineByLineRendererConfig), config);\n    }\n    LineByLineRenderer.prototype.render = function (diffFiles) {\n        var _this = this;\n        var diffsHtml = diffFiles\n            .map(function (file) {\n            var diffs;\n            if (file.blocks.length) {\n                diffs = _this.generateFileHtml(file);\n            }\n            else {\n                diffs = _this.generateEmptyDiff();\n            }\n            return _this.makeFileDiffHtml(file, diffs);\n        })\n            .join('\\n');\n        return this.hoganUtils.render(genericTemplatesPath, 'wrapper', { content: diffsHtml });\n    };\n    LineByLineRenderer.prototype.makeFileDiffHtml = function (file, diffs) {\n        if (this.config.renderNothingWhenEmpty && Array.isArray(file.blocks) && file.blocks.length === 0)\n            return '';\n        var fileDiffTemplate = this.hoganUtils.template(baseTemplatesPath, 'file-diff');\n        var filePathTemplate = this.hoganUtils.template(genericTemplatesPath, 'file-path');\n        var fileIconTemplate = this.hoganUtils.template(iconsBaseTemplatesPath, 'file');\n        var fileTagTemplate = this.hoganUtils.template(tagsBaseTemplatesPath, renderUtils.getFileIcon(file));\n        return fileDiffTemplate.render({\n            file: file,\n            fileHtmlId: renderUtils.getHtmlId(file),\n            diffs: diffs,\n            filePath: filePathTemplate.render({\n                fileDiffName: renderUtils.filenameDiff(file),\n            }, {\n                fileIcon: fileIconTemplate,\n                fileTag: fileTagTemplate,\n            }),\n        });\n    };\n    LineByLineRenderer.prototype.generateEmptyDiff = function () {\n        return this.hoganUtils.render(genericTemplatesPath, 'empty-diff', {\n            contentClass: 'd2h-code-line',\n            CSSLineClass: renderUtils.CSSLineClass,\n        });\n    };\n    LineByLineRenderer.prototype.generateFileHtml = function (file) {\n        var _this = this;\n        var matcher = Rematch.newMatcherFn(Rematch.newDistanceFn(function (e) { return renderUtils.deconstructLine(e.content, file.isCombined).content; }));\n        return file.blocks\n            .map(function (block) {\n            var lines = _this.hoganUtils.render(genericTemplatesPath, 'block-header', {\n                CSSLineClass: renderUtils.CSSLineClass,\n                blockHeader: renderUtils.escapeForHtml(block.header),\n                lineClass: 'd2h-code-linenumber',\n                contentClass: 'd2h-code-line',\n            });\n            _this.applyLineGroupping(block).forEach(function (_a) {\n                var contextLines = _a[0], oldLines = _a[1], newLines = _a[2];\n                if (oldLines.length && newLines.length && !contextLines.length) {\n                    _this.applyRematchMatching(oldLines, newLines, matcher).map(function (_a) {\n                        var oldLines = _a[0], newLines = _a[1];\n                        var _b = _this.processChangedLines(file.isCombined, oldLines, newLines), left = _b.left, right = _b.right;\n                        lines += left;\n                        lines += right;\n                    });\n                }\n                else if (contextLines.length) {\n                    contextLines.forEach(function (line) {\n                        var _a = renderUtils.deconstructLine(line.content, file.isCombined), prefix = _a.prefix, content = _a.content;\n                        lines += _this.generateSingleLineHtml({\n                            type: renderUtils.CSSLineClass.CONTEXT,\n                            prefix: prefix,\n                            content: content,\n                            oldNumber: line.oldNumber,\n                            newNumber: line.newNumber,\n                        });\n                    });\n                }\n                else if (oldLines.length || newLines.length) {\n                    var _b = _this.processChangedLines(file.isCombined, oldLines, newLines), left = _b.left, right = _b.right;\n                    lines += left;\n                    lines += right;\n                }\n                else {\n                    console.error('Unknown state reached while processing groups of lines', contextLines, oldLines, newLines);\n                }\n            });\n            return lines;\n        })\n            .join('\\n');\n    };\n    LineByLineRenderer.prototype.applyLineGroupping = function (block) {\n        var blockLinesGroups = [];\n        var oldLines = [];\n        var newLines = [];\n        for (var i = 0; i < block.lines.length; i++) {\n            var diffLine = block.lines[i];\n            if ((diffLine.type !== LineType.INSERT && newLines.length) ||\n                (diffLine.type === LineType.CONTEXT && oldLines.length > 0)) {\n                blockLinesGroups.push([[], oldLines, newLines]);\n                oldLines = [];\n                newLines = [];\n            }\n            if (diffLine.type === LineType.CONTEXT) {\n                blockLinesGroups.push([[diffLine], [], []]);\n            }\n            else if (diffLine.type === LineType.INSERT && oldLines.length === 0) {\n                blockLinesGroups.push([[], [], [diffLine]]);\n            }\n            else if (diffLine.type === LineType.INSERT && oldLines.length > 0) {\n                newLines.push(diffLine);\n            }\n            else if (diffLine.type === LineType.DELETE) {\n                oldLines.push(diffLine);\n            }\n        }\n        if (oldLines.length || newLines.length) {\n            blockLinesGroups.push([[], oldLines, newLines]);\n            oldLines = [];\n            newLines = [];\n        }\n        return blockLinesGroups;\n    };\n    LineByLineRenderer.prototype.applyRematchMatching = function (oldLines, newLines, matcher) {\n        var comparisons = oldLines.length * newLines.length;\n        var maxLineSizeInBlock = Math.max.apply(null, [0].concat(oldLines.concat(newLines).map(function (elem) { return elem.content.length; })));\n        var doMatching = comparisons < this.config.matchingMaxComparisons &&\n            maxLineSizeInBlock < this.config.maxLineSizeInBlockForComparison &&\n            (this.config.matching === 'lines' || this.config.matching === 'words');\n        return doMatching ? matcher(oldLines, newLines) : [[oldLines, newLines]];\n    };\n    LineByLineRenderer.prototype.processChangedLines = function (isCombined, oldLines, newLines) {\n        var fileHtml = {\n            right: '',\n            left: '',\n        };\n        var maxLinesNumber = Math.max(oldLines.length, newLines.length);\n        for (var i = 0; i < maxLinesNumber; i++) {\n            var oldLine = oldLines[i];\n            var newLine = newLines[i];\n            var diff = oldLine !== undefined && newLine !== undefined\n                ? renderUtils.diffHighlight(oldLine.content, newLine.content, isCombined, this.config)\n                : undefined;\n            var preparedOldLine = oldLine !== undefined && oldLine.oldNumber !== undefined\n                ? __assign(__assign({}, (diff !== undefined\n                    ? {\n                        prefix: diff.oldLine.prefix,\n                        content: diff.oldLine.content,\n                        type: renderUtils.CSSLineClass.DELETE_CHANGES,\n                    }\n                    : __assign(__assign({}, renderUtils.deconstructLine(oldLine.content, isCombined)), { type: renderUtils.toCSSClass(oldLine.type) }))), { oldNumber: oldLine.oldNumber, newNumber: oldLine.newNumber }) : undefined;\n            var preparedNewLine = newLine !== undefined && newLine.newNumber !== undefined\n                ? __assign(__assign({}, (diff !== undefined\n                    ? {\n                        prefix: diff.newLine.prefix,\n                        content: diff.newLine.content,\n                        type: renderUtils.CSSLineClass.INSERT_CHANGES,\n                    }\n                    : __assign(__assign({}, renderUtils.deconstructLine(newLine.content, isCombined)), { type: renderUtils.toCSSClass(newLine.type) }))), { oldNumber: newLine.oldNumber, newNumber: newLine.newNumber }) : undefined;\n            var _a = this.generateLineHtml(preparedOldLine, preparedNewLine), left = _a.left, right = _a.right;\n            fileHtml.left += left;\n            fileHtml.right += right;\n        }\n        return fileHtml;\n    };\n    LineByLineRenderer.prototype.generateLineHtml = function (oldLine, newLine) {\n        return {\n            left: this.generateSingleLineHtml(oldLine),\n            right: this.generateSingleLineHtml(newLine),\n        };\n    };\n    LineByLineRenderer.prototype.generateSingleLineHtml = function (line) {\n        if (line === undefined)\n            return '';\n        var lineNumberHtml = this.hoganUtils.render(baseTemplatesPath, 'numbers', {\n            oldNumber: line.oldNumber || '',\n            newNumber: line.newNumber || '',\n        });\n        return this.hoganUtils.render(genericTemplatesPath, 'line', {\n            type: line.type,\n            lineClass: 'd2h-code-linenumber',\n            contentClass: 'd2h-code-line',\n            prefix: line.prefix === ' ' ? '&nbsp;' : line.prefix,\n            content: line.content,\n            lineNumber: lineNumberHtml,\n        });\n    };\n    return LineByLineRenderer;\n}());\nexport default LineByLineRenderer;\n//# sourceMappingURL=line-by-line-renderer.js.map"],"file":"line-by-line-renderer.min.js"}